//
//  OperationsTests.swift
//  VocalRemover
//
//  Created by Vaida on 2025-05-23.
//

import Testing
@testable
import MultiArray

@Suite
struct OperationsTests {
    
//    @Test func testUniqueReference() {
//        var x = MultiArray<Float>.random(3, 4)
//        let y = MultiArray<Float>.random(3, 4)
//        let xAddress = Unmanaged<MultiArray<Float>.Storage>.passUnretained(x.storage).toOpaque()
//        let z = x + y
//        let zAddress = Unmanaged<MultiArray<Float>.Storage>.passUnretained(z.storage).toOpaque()
//        #expect(xAddress == zAddress)
//        #expect(x + y == z)
//        #expect(zip(x.buffer, y.buffer).map(+) == Array(z.buffer))
//    }
//    
//    @Test func testNonUniqueReference() {
//        var x = MultiArray<Float>.random(3, 4)
//        let y = MultiArray<Float>.random(3, 4)
//        let xAddress = Unmanaged<MultiArray<Float>.Storage>.passUnretained(x.storage).toOpaque()
//        let z = x + y
//        let zAddress = Unmanaged<MultiArray<Float>.Storage>.passUnretained(z.storage).toOpaque()
//        #expect(xAddress == zAddress)
//        let k = x + y // use x
//        let kAddress = Unmanaged<MultiArray<Float>.Storage>.passUnretained(k.storage).toOpaque()
//        #expect(xAddress != kAddress)
//    }
    
    
}
